```
ðŸ“Š ARQUITECTURA DE REDES - TRANSCENDENCE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         INTERNET / CLIENT                        â”‚
â”‚                    https://localhost:9443                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚   transcendence-   â”‚  Puertos: 9180:80
                   â”‚       nginx        â”‚           9443:443
                   â”‚  (172.18.0.4)      â”‚
                   â”‚  (172.19.0.9)      â”‚  Redes:
                   â”‚  (172.21.0.3)      â”‚  - frontend
                   â”‚  (172.20.0.3)      â”‚  - backend
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  - monitoring
                            â”‚              - game
             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
             â”‚              â”‚              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   frontend     â”‚ â”‚ backend  â”‚ â”‚   game-ws    â”‚
    â”‚ (172.21.0.2)   â”‚ â”‚(172.18.0.3)â”‚(172.18.0.2)  â”‚
    â”‚ Port: 3000     â”‚ â”‚Port: 9000â”‚â”‚ Port: 8080   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


ðŸ”· RED: transcendence_frontend (172.21.0.0/16)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ nginx          â†’ 172.21.0.3                â”‚
â”‚ â€¢ frontend       â†’ 172.21.0.2                â”‚
â”‚ â€¢ scope          â†’ 172.21.0.4                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
PropÃ³sito: Servir contenido estÃ¡tico y SPA


ðŸ”¶ RED: transcendence_backend (172.18.0.0/16)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ backend        â†’ 172.18.0.3                â”‚
â”‚ â€¢ game-ws        â†’ 172.18.0.2                â”‚
â”‚ â€¢ nginx          â†’ 172.18.0.4                â”‚
â”‚ â€¢ scope          â†’ 172.18.0.5                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
PropÃ³sito: API REST y WebSocket de juego


ðŸŸ¢ RED: transcendence_game (172.20.0.0/16)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ game-ws        â†’ 172.20.0.2                â”‚
â”‚ â€¢ nginx          â†’ 172.20.0.3                â”‚
â”‚ â€¢ scope          â†’ 172.20.0.4                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
PropÃ³sito: Aislamiento de servicios de juego en tiempo real


ðŸ”µ RED: transcendence_monitoring (172.19.0.0/16)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ cadvisor            â†’ 172.19.0.2           â”‚
â”‚   Puerto HOST: 8081  Puerto INTERNO: 8080   â”‚
â”‚ â€¢ prometheus          â†’ 172.19.0.3           â”‚
â”‚ â€¢ node-exporter       â†’ 172.19.0.4           â”‚
â”‚ â€¢ backend             â†’ 172.19.0.5           â”‚
â”‚ â€¢ php-fpm-exporter    â†’ 172.19.0.6           â”‚
â”‚ â€¢ grafana             â†’ 172.19.0.7           â”‚
â”‚ â€¢ nginx-exporter      â†’ 172.19.0.8           â”‚
â”‚ â€¢ nginx               â†’ 172.19.0.9           â”‚
â”‚ â€¢ scope               â†’ 172.19.0.10          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
PropÃ³sito: MÃ©tricas, logs y observabilidad


ðŸŸ¢ RED: transcendence_game (172.20.0.0/16)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â€¢ game-ws        â†’ 172.20.0.2                â”‚
â”‚   Puerto INTERNO: 8080 (NO expuesto al host) â”‚
â”‚   Acceso: vÃ­a Nginx /ws/                     â”‚
â”‚ â€¢ nginx          â†’ 172.20.0.3                â”‚
â”‚ â€¢ scope          â†’ 172.20.0.4                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
PropÃ³sito: Aislamiento de servicios de juego en tiempo real


ðŸ”´ CONEXIONES ACTIVAS (Prometheus Scraping)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Prometheus â†’ nginx-exporter    (cada 15s)
Prometheus â†’ php-fpm-exporter  (cada 15s)
Prometheus â†’ cadvisor          (cada 15s)
Prometheus â†’ node-exporter     (cada 15s)

âœ“ Estas conexiones son PERSISTENTES y visibles en Weave Scope


ðŸŸ¡ CONEXIONES EFÃMERAS (HTTP Request/Response)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Nginx â†’ Frontend   (solo durante peticiones)
Nginx â†’ Backend    (solo durante peticiones a /api/)
Nginx â†’ Game-WS    (solo durante peticiones a /ws/)
Nginx â†’ Grafana    (solo durante peticiones a /grafana/)

âš ï¸  Estas conexiones solo son visibles durante el trÃ¡fico activo


ðŸ“Š PARA VER TODAS LAS CONEXIONES EN WEAVE SCOPE:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Acceder a Weave Scope:
   http://localhost:4040

2. Ejecutar generador de trÃ¡fico:
   ./scripts/generate-traffic.sh

3. Refrescar la vista cada 2-3 segundos

4. Observar las conexiones aparecer en tiempo real


ðŸŽ¯ VERIFICACIÃ“N DE CONECTIVIDAD:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Ver contenedores por red
docker network inspect transcendence_backend --format '{{range .Containers}}{{.Name}}={{.IPv4Address}} {{end}}'
docker network inspect transcendence_frontend --format '{{range .Containers}}{{.Name}}={{.IPv4Address}} {{end}}'
docker network inspect transcendence_monitoring --format '{{range .Containers}}{{.Name}}={{.IPv4Address}} {{end}}'
docker network inspect transcendence_game --format '{{range .Containers}}{{.Name}}={{.IPv4Address}} {{end}}'

# Ver estado de servicios
docker compose -f compose/docker-compose.yml --profile monitoring ps

# Generar trÃ¡fico de prueba
for i in {1..5}; do 
  curl -sk https://localhost:9443/ > /dev/null
  curl -sk https://localhost:9443/api/health.php > /dev/null
  sleep 1
done
```
