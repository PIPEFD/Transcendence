# Nginx status configuration
server {
    listen 8080;
    server_name _;

    # Security: only allow access from internal network
    allow 127.0.0.1;
    allow 172.16.0.0/12;  # Docker network
    deny all;

    # Status endpoint for monitoring
    location /nginx_status {
        stub_status on;
        access_log off;
    }

    # Health check endpoint
    location = /-/health {
        access_log off;
        add_header Content-Type text/plain;
        return 200 "OK\n";
    }

    # Ready check endpoint
    location = /-/ready {
        access_log off;
        add_header Content-Type text/plain;
        return 200 "ready\n";
    }
}
